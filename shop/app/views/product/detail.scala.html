@(pd: dtos.ProductDetail)

@import common.utils.DateUtils._
@import common.utils.JsonUtils._
@import org.apache.commons.lang3.StringUtils._

@main() {
    <script src="@routes.Assets.versioned("js/jquery.scrollTo.js")"></script>
    <script type="text/javascript">

    var skuMap = @Html(object2Json(pd.getSkuMap));

    var defaultSku = "@Html(pd.getDefaultSku.getSkuPropertiesInDb)";

    var productOnline = @pd.getProduct.isOnline

    $(function(){
        $.scrollTo('#detail',500);
        $('.comment-header li').click(function(){
        $(this).addClass('current').siblings('li').removeClass('current');
        });

        $('#openDetail').click(function(){
        $('.container').slideDown(300);
        $('.hide-detail').show();
        });

        $('#hideDetail').click(function(){
        $(this).hide();
        $('.container').slideUp(500);
        });

        $('.detail-size-color').find('dd').click(function(){
        if($(this).is('.disabled')){
        return false
        }else{
        $(this).addClass('selected').siblings('dd').removeClass('selected');
        }
        });

        $('.detail-like .like').click(function(){
        //$(this).toggleClass('current');
        if($(this).is('.current')){
        $(this).removeClass('current');
        $('.like-text').text('我喜欢');
        }else{
        $(this).addClass('current');
        $('.like-text').text('50000000');
        }
        })

        $('.market-price').hover(function(){
        $(this).addClass('current');
        $('.info-tip').fadeIn(500);
        },function(){
        $(this).removeClass('current');
        $('.info-tip').hide();
        })

    });
    </script>
} {

    <div class="detail width1200" id="detail">
        <div class="detail-inner clearfix">
            <div class="left">
                <div class="bread-nav">
                    <ul class="clearfix">
                        <li><a href="@routes.Application.index()">首页</a></li>
                        <li>&gt;</li>
                        <li><a href="@routes.Application.index()">设计师品牌：@pd.getProduct.getCustomer.getName</a></li>
                        <li>&gt;</li>
                        <li>@pd.getProduct.getName </li>
                    </ul>
                </div>
                <div class="info">
                    <h2>@pd.getProduct.getName </h2>
                    <h3>设计师：@pd.getProduct.getCustomer.getName </h3>
                    <p>@pd.getProduct.getCustomer.getDescription </p>
                </div>
                <div class="video">
                    @if(isNotBlank(pd.getProduct.getVideo)) {
                        <embed src="@Html(pd.getProduct.getVideo)" allowFullScreen="true" quality="high" width="803" height="536" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>
                    } else {
                        @if(pd.getProductPicture != null && isNotBlank(pd.getProductPicture.getPictureUrl)) {
                            <img src="@pd.getProductPicture.getPictureUrl" width="803" height="536" />
                        } else {
                            <img src="@routes.Assets.versioned("images/detail/1.jpg")" width="803" height="536" />
                        }
                    }
                </div>
                <div class="img-list">
                    <div class="open-detail" id="openDetail">
                        <p>点击查看详情 <span class="ico"></span></p>
                    </div>
                    <div class="container">
                        <div class="img-con">
                            @if(pd.getHtmlList.nonEmpty) {
                                @Html(pd.getHtmlList.get(0).getContent)
                            }
                        </div>
                        <div class="comment-con">
                            <div class="comment-header">
                                <ul class="clearfix">
                                    <li class="current first">全部评价(@pd.getAllValuationCount)</li>
                                    <li class="">好评(@pd.getGoodValuationCount)</li>
                                    <li class="">中评(@pd.getNormalValuationCount)</li>
                                    <li class="">差评(@pd.getBadValuationCount)</li>
                                </ul>
                            </div>
                            <div class="comment-list">

                            </div>
                        </div>
                        <div class="comment-page">
                        </div>
                    </div>
                    <div class="hide-detail" id="hideDetail">
                        <p>隐藏商品详情 <span class="ico"></span></p>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="debut-img">
                    <img src="@routes.Assets.versioned("images/detail/debut.jpg")" alt="全球首发"/>
                </div>
                <div class="debut-info clearfix">
                    @if(pd.isInExhibition) {
                        <div class="debut-info-left">
                            <p>首发价：<span class="start-price">￥@pd.getDefaultSku.getPrice </span></p>
                            <p class="debut-time">@printDeadlineFromNow(pd.getExhibitionEndTime)</p>
                        </div>
                        <div class="debut-info-right">
                            <p><span class="market-price">售卖价:￥@pd.getDefaultSku.getMarketPrice </span>
                                <span class="info-tip">首发期间的商品采用首发价，每天都有设计师首发哦！</span></p>
                        </div>
                    } else {
                        <div class="debut-info-left">
                            <p>售卖价：<span class="start-price">￥@pd.getDefaultSku.getMarketPrice </span></p>
                        </div>
                        <div class="debut-info-right">
                            <p><span class="market-price">首发价:￥@pd.getDefaultSku.getPrice </span>
                                <span class="info-tip">首发期间的商品采用首发价，每天都有设计师首发哦！</span></p>
                        </div>
                    }
                </div>
                <div class="detail-size-color">
                    @for(sc <- pd.getSkuCandidateList) {
                        <div class="detail-size clearfix">
                            <dl>
                                <dt>@sc.getSkuProp.getValue：</dt>
                                @for(sv <- sc.getSkuValueList) {
                                    <dd data="@sv.getPidvid">@sv.getValue</dd>
                                }
                            </dl>
                        </div>
                    }
                </div>
                <div class="detail-quantity">
                    <dt>数　量：</dt>
                    <dd>
                        <div class="amount">
                            <a href="javascript:void(0);" class="btn-sub"><span>-</span></a>
                            <input type="text" size="3" maxlength="3" class="text-number" id="buy-number" value="1">
                            <a href="javascript:void(0);" class="btn-add"><span>+</span></a>
                        </div>
                    </dd>
                </div>
                @if(!pd.getProduct.isOnline) {
                    <div class="detail-btn">
                        <a href="javascript:void(0);" class="btn addToOrder">商品已下架</a>
                    </div>
                } else {
                    @if(pd.getDefaultSku.getStockQuantity <= 0) {
                        <div class="detail-btn">
                            <a href="javascript:void(0);" class="btn addToOrder">商品已售罄</a>
                        </div>
                    } else {
                        <a href="javascript:void(0);" class="btn addToOrder">立即购买</a>
                        <a href="javascript:void(0);" class="btn addToCart">加入购物车</a>
                    }
                }
                <div class="detail-like">
                    <span class="like current"><i></i><span class="like-text">我喜欢</span></span>
                </div>
            </div>
        </div>
    </div>

}

